[tox]
requires =
	tox>=4.28
	tox-uv>=1.28
env_list =
	pre-commit
	py312
	lint
skip_missing_interpreters = true

[testenv]
description = run unit tests with coverage
package = wheel
wheel_build_env = .pkg
deps =
	pytest>=8.4.1
	pytest-cov>=6.2.1
commands =
	pytest -q {posargs}

[testenv:lint]
description = run ruff lint checks
skip_install = true
deps =
	ruff>=0.12.9
commands =
	ruff check .

[testenv:pre-commit]
description = run full pre-commit suite (ruff, formatting, pyupgrade, hygiene)
skip_install = true
deps =
	pre-commit>=3.8.0
commands =
	pre-commit run --all-files --show-diff-on-failure
